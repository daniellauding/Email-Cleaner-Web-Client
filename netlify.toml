[build]
  command = "npm run build"
  publish = ".next"

[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200

[build.environment]
  NODE_VERSION = "20"
  # Skip secrets scanning for example files, docs, and build cache
  SECRETS_SCAN_OMIT_PATHS = ".env.local.example,README.md,PROJECT_SUMMARY.md,.next/cache/**"
  SECRETS_SCAN_OMIT_KEYS = "NEXTAUTH_URL"

# For Next.js on Netlify
[context.production.environment]
  NETLIFY_NEXT_PLUGIN_SKIP = "true"

[[plugins]]
  package = "@netlify/plugin-nextjs"